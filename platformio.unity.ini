; PlatformIO Unity test environment for embedded (ESP32/ESP8266)
; Add this to platformio.ini or merge with your existing test environments

[env:seeed_xiao_esp32s3_unity]
platform = espressif32
board = seeed_xiao_esp32s3
framework = arduino
lib_deps =
    bblanchon/ArduinoJson@^7.4.1
lib_ignore = Unity
build_flags =
    -std=gnu++11
    -DRUN_EMBEDDED_TESTS
    -DTESTBENCH
    -DUNITY_EMBEDDED
    -Isrc
    -Isrc/interface
    -Itest
    ; Unity headers supplied by PlatformIO test runner (no extra lib needed)
monitor_speed = 115200
; Explicit ports (adjust COM number to match your system via `pio device list`)
upload_port = COM6
monitor_port = COM6

; Usage:
;   pio test -e seeed_xiao_esp32s3_unity
;   or
;   pio run -e seeed_xiao_esp32s3_unity -t upload
;   pio device monitor -e seeed_xiao_esp32s3_unity
